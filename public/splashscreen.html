<!DOCTYPE html>
<html lang="en" style="height: 100%;">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BerlexDevTools</title>
</head>

<body
    style="width: 100%;background-color: #1a202c;height: 100%;margin: 0;display: flex;align-items: center;justify-content: center;">
    <img style="padding: 10%" src="Berlex_ITS_logo_white.svg">
</body>

<script>
    const invoke = window.__TAURI__.invoke
    const checkUpdate = window.__TAURI__.checkUpdate
    const installUpdate = window.__TAURI__.installUpdate
    const relaunch = window.__TAURI__.relaunch

    async function CheckUpdate() {
        try {
            const { shouldUpdate, manifest } = await checkUpdate();
            console.log(manifest);
            if (shouldUpdate) {
                // display dialog
                await installUpdate();
                // install complete, restart app
                await relaunch();
            }
            else {
                invoke('close_splashscreen')
            }
        } catch (error) {
            console.log(error);
            invoke('close_splashscreen')
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        setTimeout(async () => {
            await CheckUpdate();
        }, 2000);
    })
</script>

</html>